{"ast":null,"code":"export default {\n  name: \"StorageManagement\",\n  data() {\n    return {\n      tableData: [],\n      pageSize: 10,\n      pageNum: 1,\n      total: 0,\n      name: '',\n      //refer v-model里的name\n      centerDialogVisible: false,\n      form: {\n        id: '',\n        name: '',\n        remark: ''\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: 'Please input  name',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    resetForm() {\n      this.$refs.form.resetFields();\n    },\n    handleSizeChange(val) {\n      console.log(`${val} items per page`);\n      this.pageNum = 1;\n      this.pageSize = val;\n      this.loadPost();\n    },\n    handleCurrentChange(val) {\n      console.log(`current page: ${val}`);\n      this.pageNum = val;\n      this.loadPost();\n    },\n    resetParam() {\n      this.name = '';\n    },\n    add() {\n      this.centerDialogVisible = true;\n      this.$nextTick(() => {\n        this.resetForm();\n      });\n    },\n    mod(row) {\n      this.centerDialogVisible = true;\n      this.$nextTick(() => {\n        this.form.id = row.id;\n        this.form.name = row.name;\n        this.form.remark = row.remark;\n      });\n    },\n    del(id) {\n      this.$axios.get(this.$httpUrl + '/storage/del?id=' + id).then(res => res.data).then(res => {\n        console.log(res);\n        if (res.code == 200) {\n          this.$message({\n            message: 'Delete Successed!',\n            type: 'success'\n          });\n          this.loadPost();\n        } else {\n          this.$message({\n            message: 'Operation Failed！',\n            type: 'error'\n          });\n        }\n      });\n    },\n    doSave() {\n      this.$axios.post(this.$httpUrl + '/storage/save', this.form).then(res => res.data).then(res => {\n        console.log(res);\n        if (res.code == 200) {\n          this.$message({\n            message: 'Save Successed!',\n            type: 'success'\n          });\n          this.centerDialogVisible = false;\n          this.loadPost();\n          this.resetForm();\n        } else {\n          this.$message({\n            message: 'Operation Failed！',\n            type: 'error'\n          });\n        }\n      });\n    },\n    doMod() {\n      this.$axios.post(this.$httpUrl + '/storage/update', this.form).then(res => res.data).then(res => {\n        console.log(res);\n        if (res.code == 200) {\n          this.$message({\n            message: 'Save Successed!',\n            type: 'success'\n          });\n          this.centerDialogVisible = false;\n          this.loadPost();\n          this.resetForm();\n        } else {\n          this.$message({\n            message: 'Operation Failed！',\n            type: 'error'\n          });\n        }\n      });\n    },\n    save() {\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          if (this.form.id) {\n            this.doMod();\n          } else {\n            this.doSave();\n          }\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    loadPost() {\n      this.$axios.post(this.$httpUrl + '/storage/listPageEn', {\n        pageSize: this.pageSize,\n        pageNum: this.pageNum,\n        param: {\n          name: this.name //refer data里的name\n        }\n      }).then(res => res.data).then(res => {\n        console.log(res);\n        if (res.code == 200) {\n          this.tableData = res.data;\n          this.total = res.total;\n        } else {\n          alert(\"Resource Get Failed\");\n        }\n      });\n    }\n  },\n  beforeMount() {\n    this.loadPost();\n  }\n};","map":{"version":3,"mappings":"AAuEA;EACAA;EACAC;IAEA;MACAC;MACAC;MACAC;MACAC;MACAL;MAAA;MACAM;MACAC;QACAC;QACAR;QACAS;MACA;MACAC;QACAV,OACA;UAAAW;UAAAC;UAAAC;QAAA;MAEA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACAC;MACA;MACA;MACA;IACA;IACAC;MACAD;MACA;MACA;IACA;IACAE;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACAL;QACA;UAEA;YACAL;YACAW;UACA;UACA;QACA;UACA;YACAX;YACAW;UACA;QACA;MAEA;IACA;IACAC;MACA;QACAP;QACA;UAEA;YACAL;YACAW;UACA;UACA;UACA;UACA;QACA;UACA;YACAX;YACAW;UACA;QACA;MAEA;IACA;IACAE;MACA;QACAR;QACA;UAEA;YACAL;YACAW;UACA;UACA;UACA;UACA;QACA;UACA;YACAX;YACAW;UACA;QACA;MAEA;IACA;IACAG;MACA;QACA;UACA;YACA;UACA;YACA;UACA;QACA;UACAT;UACA;QACA;MACA;IAEA;IACAU;MACA;QACAxB;QACAC;QACAwB;UACA5B;QACA;MACA;QACAiB;QACA;UACA;UACA;QACA;UACAY;QACA;MAEA;IACA;EACA;EAEAC;IACA;EACA;AAEA","names":["name","data","tableData","pageSize","pageNum","total","centerDialogVisible","form","id","remark","rules","required","message","trigger","methods","resetForm","handleSizeChange","console","handleCurrentChange","resetParam","add","mod","del","type","doSave","doMod","save","loadPost","param","alert","beforeMount"],"sourceRoot":"src/components/storage","sources":["StorageManagement.vue"],"sourcesContent":["<template>\n  <div>\n    <div style=\"margin-bottom: 10px;text-align: center\">\n      <el-input v-model=\"name\" placeholder=\"Please enter warehouse name\" suffix-icon=\"el-icon-search\" style=\"width:200px\"\n                @keyup.enter.native=\"loadPost\"></el-input>\n      <el-button type=\"primary\" style=\"margin-left: 10px\" @click=\"loadPost\">Search</el-button>\n      <el-button type=\"success\" @click=\"resetParam\">Reset</el-button>\n\n      <el-button type=\"primary\" style=\"margin-left: 10px\" @click=\"add\">Add</el-button>\n    </div>\n    <el-table :data=\"tableData\"\n              :header-cell-style=\"{ background:'#f2f5f2', color:'#555555'}\"\n              border\n    >\n      <el-table-column prop=\"id\" label=\"ID\" width=\"200\">\n      </el-table-column>\n      <el-table-column prop=\"name\" label=\"Warehouse Name\" width=\"280\">\n      </el-table-column>\n      <el-table-column prop=\"remark\" label=\"remark\" width=\"500\">\n      </el-table-column>\n\n      <el-table-column prop=\"operate\" label=\"Operate\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"success\" @click=\"mod(scope.row)\"> Edit</el-button>\n          <el-popconfirm\n              title=\"Are you sure to delete this?\"\n              @confirm=\"del(scope.row.id)\"\n              style=\"margin-left: 5px\"\n          >\n            <!--              confirm 以后才调用del-->\n\n            <el-button slot=\"reference\" size=\"mini\" type=\"danger\" >Delete</el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[5, 10, 20,30]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\">\n    </el-pagination>\n\n    <el-dialog\n        title=\"Adding account\"\n        :visible.sync=\"centerDialogVisible\"\n        width=\"30%\"\n        center>\n      <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"120px\">\n        <el-form-item label=\"Warehouse Name\" prop=\"name\">\n          <el-input v-model=\"form.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"remark\" prop=\"remark\">\n          <el-input v-model=\"form.remark\"></el-input>\n        </el-form-item>\n\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"centerDialogVisible = false\">Cancel</el-button>\n    <el-button type=\"primary\" @click=\"save\">Confirm</el-button>\n  </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n\n<script>\nexport default {\n  name: \"StorageManagement\",\n  data() {\n\n    return{\n      tableData: [],\n      pageSize:10,\n      pageNum:1,\n      total:0,\n      name:'',//refer v-model里的name\n      centerDialogVisible:false,\n      form:{\n        id:'',\n        name:'',\n        remark:''\n      },\n      rules: {\n        name: [\n          {required: true, message: 'Please input  name', trigger: 'blur'},\n        ],\n      }\n    }\n  },\n  methods: {\n    resetForm() {\n      this.$refs.form.resetFields();\n    },\n    handleSizeChange(val) {\n      console.log(`${val} items per page`);\n      this.pageNum=1\n      this.pageSize=val\n      this.loadPost()\n    },\n    handleCurrentChange(val) {\n      console.log(`current page: ${val}`);\n      this.pageNum=val\n      this.loadPost()\n    },\n    resetParam(){\n      this.name=''\n    },\n    add(){\n      this.centerDialogVisible=true;\n      this.$nextTick(()=>{\n        this.resetForm()\n      })\n    },\n    mod(row){\n      this.centerDialogVisible=true\n      this.$nextTick(()=>{\n        this.form.id=row.id\n        this.form.name=row.name\n        this.form.remark=row.remark\n      })\n    },\n    del(id){\n      this.$axios.get(this.$httpUrl+'/storage/del?id='+id).then(res=>res.data).then(res=>{\n        console.log(res)\n        if(res.code==200){\n\n          this.$message({\n            message: 'Delete Successed!',\n            type: 'success'\n          });\n          this.loadPost()\n        }else{\n          this.$message({\n            message: 'Operation Failed！',\n            type: 'error'\n          });\n        }\n\n      })\n    },\n    doSave(){\n      this.$axios.post(this.$httpUrl+'/storage/save',this.form).then(res=>res.data).then(res=>{\n        console.log(res)\n        if(res.code==200){\n\n          this.$message({\n            message: 'Save Successed!',\n            type: 'success'\n          });\n          this.centerDialogVisible = false\n          this.loadPost()\n          this. resetForm()\n        }else{\n          this.$message({\n            message: 'Operation Failed！',\n            type: 'error'\n          });\n        }\n\n      })\n    },\n    doMod(){\n      this.$axios.post(this.$httpUrl+'/storage/update',this.form).then(res=>res.data).then(res=>{\n        console.log(res)\n        if(res.code==200){\n\n          this.$message({\n            message: 'Save Successed!',\n            type: 'success'\n          });\n          this.centerDialogVisible = false\n          this.loadPost()\n          this. resetForm()\n        }else{\n          this.$message({\n            message: 'Operation Failed！',\n            type: 'error'\n          });\n        }\n\n      })\n    },\n    save(){\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          if(this.form.id){\n            this.doMod();\n          }else{\n            this.doSave();\n          }\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n\n    },\n    loadPost() {\n      this.$axios.post(this.$httpUrl+'/storage/listPageEn',{\n        pageSize: this.pageSize,\n        pageNum:this.pageNum,\n        param:{\n          name:this.name,//refer data里的name\n        }\n      }).then(res=>res.data).then(res=>{\n        console.log(res)\n        if(res.code==200){\n          this.tableData=res.data\n          this.total=res.total\n        }else{\n          alert(\"Resource Get Failed\")\n        }\n\n      })\n    },\n  },\n\n  beforeMount() {\n    this.loadPost()\n  }\n\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}