{"ast":null,"code":"export default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      confirm_disabled: false,\n      loginForm: {\n        no: '',\n        password: ''\n      },\n      rules: {\n        no: [{\n          required: true,\n          message: 'Please input account number',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: 'Please input password',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    confirm() {\n      this.confirm_disabled = true;\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          //valid成功为true，失败为false\n          //去后台验证用户名密码\n          this.$axios.post(this.$httpUrl + '/user/login', this.loginForm).then(res => res.data).then(res => {\n            if (res.code == 200) {\n              //存储\n              console.log(\"123\" + res.data.user);\n              sessionStorage.setItem(\"CurUser\", JSON.stringify(res.data.user));\n              console.log(\"555\" + res.data.user);\n              console.log(\"333\" + res.data.menu);\n              this.$store.commit('setMenu', res.data.menu);\n              //跳转到主页\n              this.$router.replace('/MyTemp');\n            } else {\n              this.confirm_disabled = false;\n              alert('Account Number or Password is invalid!');\n              return false;\n            }\n          });\n        } else {\n          this.confirm_disabled = false;\n          console.log('校验失败');\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA2BA;EACAA;EACAC;IACA;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;QACAF,KACA;UAAAG;UAAAC;UAAAC;QAAA,EACA;QACAJ,WACA;UAAAE;UAAAC;UAAAC;QAAA;MAEA;IACA;EACA;EACAC;IAEAC;MACA;MACA;QACA;UAAA;UACA;UACA;YACA;cACA;cACAC;cACAC;cACAD;cACAA;cACA;cACA;cACA;YACA;cACA;cACAE;cACA;YACA;UACA;QACA;UACA;UACAF;UACA;QACA;MACA;IAEA;EACA;AACA","names":["name","data","confirm_disabled","loginForm","no","password","rules","required","message","trigger","methods","confirm","console","sessionStorage","alert"],"sourceRoot":"src/components","sources":["LoginPage.vue"],"sourcesContent":["\n<template>\n  <div class=\"loginBody\">\n    <div class=\"loginDiv\">\n      <div class=\"login-content\">\n        <h1 class=\"login-title\">Login</h1>\n        <el-form :model=\"loginForm\" label-width=\"100px\"\n                 :rules=\"rules\" ref=\"loginForm\">\n          <el-form-item label=\"Account Number\" prop=\"no\">\n            <el-input style=\"width: 200px; padding-top: 5%\" type=\"text\" v-model=\"loginForm.no\"\n                      autocomplete=\"off\" size=\"small\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"Passward\" prop=\"password\">\n            <el-input style=\"width: 200px\" type=\"password\" v-model=\"loginForm.password\"\n                      show-password autocomplete=\"off\" size=\"small\" @keyup.enter.native=\"confirm\"></el-input>\n          </el-form-item>\n          <el-form-item style=\"padding-left: 13%\">\n            <el-button type=\"primary\" @click=\"confirm\" :disabled=\"confirm_disabled\" >Confirm</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<script>\nexport default {\n  name: \"LoginPage\",\n  data(){\n    return{\n      confirm_disabled:false,\n      loginForm:{\n        no:'',\n        password:''\n      },\n      rules:{\n        no: [\n          { required: true, message: 'Please input account number', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: 'Please input password', trigger: 'blur' }\n        ],\n      }\n    }\n  },\n  methods:{\n\n    confirm(){\n      this.confirm_disabled=true;\n      this.$refs.loginForm.validate((valid) => {\n        if (valid) { //valid成功为true，失败为false\n          //去后台验证用户名密码\n          this.$axios.post(this.$httpUrl+'/user/login',this.loginForm).then(res=>res.data).then(res=>{\n            if(res.code==200){\n              //存储\n              console.log(\"123\"+res.data.user)\n              sessionStorage.setItem(\"CurUser\",JSON.stringify(res.data.user))\n              console.log(\"555\"+res.data.user)\n              console.log(\"333\"+res.data.menu)\n              this.$store.commit('setMenu',res.data.menu)\n              //跳转到主页\n              this.$router.replace('/MyTemp');\n            }else{\n              this.confirm_disabled=false;\n              alert('Account Number or Password is invalid!');\n              return false;\n            }\n          });\n        } else {\n          this.confirm_disabled=false;\n          console.log('校验失败');\n          return false;\n        }\n      });\n\n    }\n  }\n}\n</script>\n\n<style scoped>\n.loginBody {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: #B3C0D1;\n}\n.loginDiv {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -200px;\n  margin-left: -250px;\n  width: 450px;\n  height: 330px;\n  background: #fff;\n  border-radius: 5%;\n\n}\n.login-title {\n  margin: 20px 0;\n  text-align: center;\n}\n.login-content {\n  width: 400px;\n  height: 250px;\n  position: absolute;\n  top: 25px;\n  left: 25px;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}